
#include "osapi.h"
#include "cfg.h"
#include "includes.h"
#include "system_NUC1xx.h"

void ErrorHook( StatusType error )
{
	/*
	TaskType taskId;
	TaskStateType state;
	GetTaskID(&taskId);

	printf("\n|*********************In Error Hook *********************|\n");
	showTaskInfo(taskId);
	printf("|*********************Error Hook end*********************|\n\n");
	*/
}

void PostTaskHook( void )
{
	/*
	TaskType taskId;
	TaskStateType state;
	OSDWORD t;
	GetTaskID(&taskId);

	printf("\n|*******************In PostTask Hook ********************|\n");
	showTaskInfo(taskId);
	printf("|*******************PostTask Hook end********************|\n\n");
	*/
}

void StartupHook( void )
{
	/*
	OSBYTE t;
	t=GetActiveApplicationMode();
	showLogo();
	printf("\n|*******************In Startup Hook *********************|\n");
	printf("the active application mode is %d\n",(int)t);
	printf("|*******************Startup Hook end*********************|\n\n");
	*/
}
void ShutdownHook( StatusType error )
{

}
TASK(Task1)
{
	unsigned char DisplayBuf [8*128];
	uint8_t x, y;
	int num;
	unsigned char Nuvoton[128*8] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x44,0xC4,0x8C,0xFC,0xE7,0x87,0xE4,0xFC,0x4E,0xC6,0x04,0xFE,0xFE,0x82,0x82,0x83,0x81,0xC1,0x41,0xC0,0x00,0x00,0x00,0x00,0xFF,0xFE,0x82,0x92,0x92,0x92,0x92,0x92,0x93,0xFF,0x96,0x92,0x92,0x92,0xF2,0xFA,0xD3,0x43,0xC2,0x00,0x00,0x00,0x12,0x12,0x12,0xFE,0xFF,0x91,0x11,0x19,0x11,0x60,0x42,0xC6,0x8C,0x08,0x00,0xFF,0xFF,0x01,0x00,0x00,0x00,0x00,0x00,0x10,0x10,0x10,0xFF,0xF1,0x19,0x98,0x98,0x88,0x88,0x88,0x88,0xFF,0xF9,0x89,0x88,0xC8,0x8C,0x0C,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x84,0xC4,0x74,0x14,0xFF,0xFF,0x14,0x34,0xE6,0x86,0xF4,0x7F,0x07,0x00,0x00,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x3F,0x00,0x16,0xF4,0x24,0x24,0x24,0x24,0x3F,0x24,0x24,0x24,0x24,0xF7,0xF3,0x24,0x00,0x00,0x00,0x00,0x00,0x30,0x18,0x07,0xFF,0xFF,0x01,0x03,0x07,0x08,0x08,0x08,0x08,0x09,0x08,0x08,0xFF,0xFF,0x0C,0x06,0x0C,0x00,0x00,0x00,0x0C,0x0C,0x04,0xFF,0xFF,0x01,0x01,0x00,0x01,0x07,0x8C,0xF8,0x70,0x70,0xD8,0x8F,0x03,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x03,0x03,0x00,0x00,0x02,0x03,0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x01,0x00,0x00,0x02,0x03,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x01,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x03,0x02,0x03,0x03,0x02,0x02,0x02,0x03,0x01,0x01,0x00,0x00,0x00,0x00,0x01,0x01,0x03,0x03,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x10,0xF0,0xF0,0xE0,0x80,0x00,0x00,0x10,0x10,0xF0,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0xF0,0xF0,0xF0,0x00,0x00,0x00,0xC0,0xF0,0xF0,0x10,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0xFF,0xFF,0x01,0x07,0x1E,0x38,0xF0,0xC0,0xFF,0x00,0x00,0x00,0x02,0xFE,0xFE,0x00,0x00,0x02,0x02,0xFE,0xFE,0x00,0x00,0x00,0xFF,0x03,0x1F,0xFE,0xE0,0x7C,0x07,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0xFE,0xFE,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0xDC,0x06,0x02,0x02,0x06,0x0E,0x0C,0x00,0x00,0x00,0x00,0x00,0x04,0xFE,0xFE,0x0C,0x06,0x06,0x06,0x00,0x00,0x00,0xF8,0xFC,0x06,0x02,0x02,0x02,0x06,0xFE,0xFC,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x04,0x07,0x07,0x04,0x00,0x00,0x00,0x00,0x03,0x07,0x00,0x00,0x00,0x00,0x01,0x07,0x04,0x04,0x04,0x02,0x07,0x07,0x04,0x00,0x04,0x07,0x04,0x04,0x01,0x07,0x00,0x04,0x07,0x07,0x04,0x00,0x00,0x00,0x00,0x04,0x04,0x07,0x07,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x07,0x06,0x04,0x04,0x04,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x04,0x07,0x07,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x01,0x03,0x07,0x04,0x04,0x04,0x07,0x07,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	};
	
	clr_all_pannal();

	for (y=0; y<128; y++) {
    	for (x=0; x<8; x++) {
				DisplayBuf[y*8+x] = Nuvoton[y+x*128];
			}
	}
	draw_LCD(DisplayBuf);	// render to LCD
	num = 10000;
	while(num != 0)
	{
		num--;
	}
}

TASK(Task2)
{

}
TASK(Task3)
{

}
TASK(Task4)
{

}
TASK(TaskError)
{
	unsigned char DisplayBuf [8*128];
	uint8_t x, y;
	int num;
	unsigned char Nuvoton[128*8] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x44,0xC4,0x8C,0xFC,0xE7,0x87,0xE4,0xFC,0x4E,0xC6,0x04,0xFE,0xFE,0x82,0x82,0x83,0x81,0xC1,0x41,0xC0,0x00,0x00,0x00,0x00,0xFF,0xFE,0x82,0x92,0x92,0x92,0x92,0x92,0x93,0xFF,0x96,0x92,0x92,0x92,0xF2,0xFA,0xD3,0x43,0xC2,0x00,0x00,0x00,0x12,0x12,0x12,0xFE,0xFF,0x91,0x11,0x19,0x11,0x60,0x42,0xC6,0x8C,0x08,0x00,0xFF,0xFF,0x01,0x00,0x00,0x00,0x00,0x00,0x10,0x10,0x10,0xFF,0xF1,0x19,0x98,0x98,0x88,0x88,0x88,0x88,0xFF,0xF9,0x89,0x88,0xC8,0x8C,0x0C,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x84,0xC4,0x74,0x14,0xFF,0xFF,0x14,0x34,0xE6,0x86,0xF4,0x7F,0x07,0x00,0x00,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x3F,0x00,0x16,0xF4,0x24,0x24,0x24,0x24,0x3F,0x24,0x24,0x24,0x24,0xF7,0xF3,0x24,0x00,0x00,0x00,0x00,0x00,0x30,0x18,0x07,0xFF,0xFF,0x01,0x03,0x07,0x08,0x08,0x08,0x08,0x09,0x08,0x08,0xFF,0xFF,0x0C,0x06,0x0C,0x00,0x00,0x00,0x0C,0x0C,0x04,0xFF,0xFF,0x01,0x01,0x00,0x01,0x07,0x8C,0xF8,0x70,0x70,0xD8,0x8F,0x03,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x03,0x03,0x00,0x00,0x02,0x03,0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x01,0x00,0x00,0x02,0x03,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x01,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x03,0x02,0x03,0x03,0x02,0x02,0x02,0x03,0x01,0x01,0x00,0x00,0x00,0x00,0x01,0x01,0x03,0x03,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x10,0xF0,0xF0,0xE0,0x80,0x00,0x00,0x10,0x10,0xF0,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0xF0,0xF0,0xF0,0x00,0x00,0x00,0xC0,0xF0,0xF0,0x10,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0xFF,0xFF,0x01,0x07,0x1E,0x38,0xF0,0xC0,0xFF,0x00,0x00,0x00,0x02,0xFE,0xFE,0x00,0x00,0x02,0x02,0xFE,0xFE,0x00,0x00,0x00,0xFF,0x03,0x1F,0xFE,0xE0,0x7C,0x07,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0xFE,0xFE,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0xDC,0x06,0x02,0x02,0x06,0x0E,0x0C,0x00,0x00,0x00,0x00,0x00,0x04,0xFE,0xFE,0x0C,0x06,0x06,0x06,0x00,0x00,0x00,0xF8,0xFC,0x06,0x02,0x02,0x02,0x06,0xFE,0xFC,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x04,0x07,0x07,0x04,0x00,0x00,0x00,0x00,0x03,0x07,0x00,0x00,0x00,0x00,0x01,0x07,0x04,0x04,0x04,0x02,0x07,0x07,0x04,0x00,0x04,0x07,0x04,0x04,0x01,0x07,0x00,0x04,0x07,0x07,0x04,0x00,0x00,0x00,0x00,0x04,0x04,0x07,0x07,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x07,0x06,0x04,0x04,0x04,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x04,0x07,0x07,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x01,0x03,0x07,0x04,0x04,0x04,0x07,0x07,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	};
	
	clr_all_pannal();

	for (y=0; y<128; y++) {
    	for (x=0; x<8; x++) {
				DisplayBuf[y*8+x] = Nuvoton[y+x*128];
			}
	}
	draw_LCD(DisplayBuf);	// render to LCD
	num = 10000;
	while(num != 0)
	{
		num--;
	}
}


void read_timer_value(unsigned int *value)
{
	*value = DrvTIMER_GetCounters(E_TMR0);
}
int main()
{
	unsigned char err=err;
	
	UNLOCKREG();
	SYSCLK->PWRCON.XTL12M_EN = 1; 	//Enable 12Mhz and set HCLK->12Mhz
	SYSCLK->CLKSEL0.HCLK_S = 0;
	LOCKREG();		
	
	//BSP_UartInit(); 
	OSEK_CPU_INIT();
	//BSP_TimerInit();
	//OSEK_TIMER_START();
	__enable_irq();
	//showLogo();
	
	StartOS(OSDEFAULTAPPMODE);
	
	
	return 0;
}